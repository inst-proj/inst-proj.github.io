---
title: Функции
layout: base
permalink: /js-dir/functions/
---

<div class="left-side sidebar">
	<a href="/js-dir/switch/" class="prev-btn pagin-btn">
		<i class="fas fa-chevron-left"></i>
	</a>
</div>
<div class="right-side sidebar">
	<a href="/js-dir/functional-expressions/" class="next-btn pagin-btn">
		<i class="fas fa-chevron-right"></i>
	</a>
</div>

<section class="section-syntax">
	<div class="container">
		<div class="row justify-content-center">
			<div class="col-10">
				<h1 class="section-syntax__head">
					{{ page.title }}
				</h1>
				<div class="section-syntax__content">
					<p>Зачастую нам надо повторять одно и то же действие во многих частях программы.</p>
					<p>Например, красиво вывести сообщение необходимо при приветствии посетителя, при выходе посетителя с сайта, ещё где-нибудь.</p>
					<p>Чтобы не повторять один и тот же код во многих местах, придуманы функции. Функции являются основными «строительными блоками» программы.</p>
					<p>Примеры встроенных функций вы уже видели – это <code>alert(message)</code>, <code>prompt(message, default)</code> и <code>confirm(question)</code>. Но можно создавать и свои.</p>
					<h2>Объявление</h2><p>Пример объявления функции:</p>
					
					<div class="flex-center">
						<img src="/images/js/16.1.png" alt="Объявление">
					</div>
					
					<p>Вначале идет ключевое слово <code>function</code>, после него <em>имя функции</em>, затем <em>список параметров</em> в скобках (в примере выше он пустой) и <em>тело функции</em> – код, который выполняется при её вызове.</p>
					<p>Объявленная функция доступна по имени, например:</p>
					
					<div class="flex-center">
						<img src="/images/js/16.2.png" alt="Объявление">
					</div>
					
					<p>Этот код выведет сообщение два раза. Уже здесь видна <strong>главная цель создания функций: избавление от дублирования кода</strong>.</p>
					<p>Если понадобится поменять сообщение или способ его вывода – достаточно изменить его в одном месте: в функции, которая его выводит.</p>
					<h2>Локальные переменные</h2><p>Функция может содержать <em>локальные</em> переменные, объявленные через <code>var</code>. Такие переменные видны только внутри функции:</p>
					
					<div class="flex-center">
						<img src="/images/js/16.3.png" alt="Локальные переменные">
					</div>
					
					<p><strong>Блоки <code>if/else</code>, <code>switch</code>, <code>for</code>, <code>while</code>, <code>do..while</code> не влияют на область видимости переменных.</strong></p>
					<p>При объявлении переменной в таких блоках, она всё равно будет видна во всей функции.</p>
					<p>Например:</p>
					
					<div class="flex-center">
						<img src="/images/js/16.4.png" alt="Локальные переменные">
					</div>
					
					<p><strong>Неважно, где именно в функции и сколько раз объявляется переменная. Любое объявление срабатывает один раз и распространяется на всю функцию.</strong></p>
					<p>Объявления переменных в примере выше можно передвинуть вверх, это ни на что не повлияет:</p>
					
					<div class="flex-center">
						<img src="/images/js/16.5.png" alt="Локальные переменные">
					</div>
					
					<h2>Внешние переменные</h2><p>Функция может обратиться ко внешней переменной, например:</p>
					
					<div class="flex-center">
						<img src="/images/js/16.6.png" alt="Локальные переменные">
					</div>
					
					<p>Доступ возможен не только на чтение, но и на запись. При этом, так как переменная внешняя, то изменения будут видны и снаружи функции:</p>
					
					<div class="flex-center">
						<img src="/images/js/16.7.png" alt="Локальные переменные">
					</div>
					
					<p>Конечно, если бы внутри функции, в строке <code>(1)</code>, была бы объявлена своя локальная переменная <code>var userName</code>, то все обращения использовали бы её, и внешняя переменная осталась бы неизменной.</p>
					<p><strong>Переменные, объявленные на уровне всего скрипта, называют <em>«глобальными переменными»</em>.</strong></p>
					<p>В примере выше переменная <code>userName</code> – глобальная.</p>
					<p>Делайте глобальными только те переменные, которые действительно имеют общее значение для вашего проекта, а нужные для решения конкретной задачи – пусть будут локальными в соответствующей функции.</p>
					<div class="important important_warn">
						<div class="important__header"><span class="important__type">Внимание: неявное объявление глобальных переменных!</span></div>
						<div class="important__content"><p>В старом стандарте JavaScript существовала возможность неявного объявления переменных присвоением значения.</p>
					<p>Например:</p>
					
					<div class="flex-center">
						<img src="/images/js/16.8.png" alt="Локальные переменные">
					</div>
					
					<p>В коде выше переменная <code>message</code> нигде не объявлена, а сразу присваивается. Скорее всего, программист просто забыл поставить <code>var</code>.</p>
					<p>При <code>use strict</code> такой код привёл бы к ошибке, но без него переменная будет создана автоматически, причём в примере выше она создаётся не в функции, а на уровне всего скрипта.</p>
					<p>Избегайте этого.</p>
					<p>Здесь опасность даже не в автоматическом создании переменной, а в том, что глобальные переменные должны использоваться тогда, когда действительно нужны «общескриптовые» параметры.</p>
					<p>Забыли <code>var</code> в одном месте, потом в другом – в результате одна функция неожиданно поменяла глобальную переменную, которую использует другая. И поди разберись, кто и когда её поменял, не самая приятная ошибка для отладки.</p>
					</div></div>
					<p>В будущем, когда мы лучше познакомимся с основами JavaScript, в главе Замыкания, функции изнутри, мы более детально рассмотрим внутренние механизмы работы переменных и функций.</p>
					<h2>Параметры</h2><p>При вызове функции ей можно передать данные, которые та использует по своему усмотрению.</p>
					<p>Например, этот код выводит два сообщения:</p>
					
					<div class="flex-center">
						<img src="/images/js/16.9.png" alt="Параметры">
					</div>
					
					<p><strong>Параметры копируются в локальные переменные функции</strong>.</p>
					<p>Например, в коде ниже есть внешняя переменная <code>from</code>, значение которой при запуске функции копируется в параметр функции с тем же именем. Далее функция работает уже с параметром:</p>
					
					<div class="flex-center">
						<img src="/images/js/16.10.png" alt="Параметры">
					</div>
					
					<h2>Аргументы по умолчанию</h2><p>Функцию можно вызвать с любым количеством аргументов.</p>
					<p>Если параметр не передан при вызове – он считается равным <code>undefined</code>.</p>
					<p>Например, функцию показа сообщения <code>showMessage(from, text)</code> можно вызвать с одним аргументом:</p>
					
					<div class="flex-center">
						<img src="/images/js/16.11.png" alt="Параметры">
					</div>
					
					<p>При этом можно проверить, и если параметр не передан – присвоить ему значение «по умолчанию»:</p>
					
					<div class="flex-center">
						<img src="/images/js/16.12.png" alt="Параметры">
					</div>
					
					<p><strong>При объявлении функции необязательные аргументы, как правило, располагают в конце списка.</strong></p>
					<p>Для указания значения «по умолчанию», то есть, такого, которое используется, если аргумент не указан, используется два способа:</p>
					<ol>
					<li>
					<p>Можно проверить, равен ли аргумент <code>undefined</code>, и если да – то записать в него значение по умолчанию. Этот способ продемонстрирован в примере выше.</p>
					</li>
					<li>
					<p>Использовать оператор <code>||</code>:</p>
					
					<div class="flex-center">
						<img src="/images/js/16.13.png" alt="Параметры">
					</div>
					
					<p>Второй способ считает, что аргумент отсутствует, если передана пустая строка, <code>0</code>, или вообще любое значение, которое в логическом контексте является <code>false</code>.</p>
					</li>
					</ol>
					<p>Если аргументов передано больше, чем надо, например <code>showMessage(&quot;Маша&quot;, &quot;привет&quot;, 1, 2, 3)</code>, то ошибки не будет. Но, чтобы получить такие «лишние» аргументы, нужно будет прочитать их из специального объекта <code>arguments</code>, который мы рассмотрим в главе <a href="/arguments-pseudoarray">Псевдомассив аргументов &quot;arguments&quot;</a>.</p>
					<h2>Возврат значения</h2><p>Функция может возвратить результат, который будет передан в вызвавший её код.</p>
					<p>Например, создадим функцию <code>calcD</code>, которая будет возвращать дискриминант квадратного уравнения по формуле <code>b<sup>2</sup> – 4ac</code>:</p>
					
					<div class="flex-center">
						<img src="/images/js/16.14.png" alt="Возврат значения">
					</div>
					
					<p><strong>Для возврата значения используется директива <code>return</code>.</strong></p>
					<p>Она может находиться в любом месте функции. Как только до неё доходит управление – функция  завершается и значение передается обратно.</p>
					<p>Вызовов <code>return</code> может быть и несколько, например:</p>
					
					<div class="flex-center">
						<img src="/images/js/16.15.png" alt="Возврат значения">
					</div>
					
					<p>Директива <code>return</code> может также использоваться без значения, чтобы прекратить выполнение и выйти из функции.</p>
					<p>Например:</p>
					
					<div class="flex-center">
						<img src="/images/js/16.16.png" alt="Возврат значения">
					</div>
					
					<p>В коде выше, если сработал <code>if</code>, то строка <code>(*)</code> и весь код под ней никогда не выполнится, так как <code>return</code> завершает выполнение функции.</p>
					<div class="important important_smart">
						<div class="important__header"><span class="important__type">Значение функции без <code>return</code> и с пустым <code>return</code></span></div>
						<div class="important__content"><p>В случае, когда функция не вернула значение или <code>return</code> был без аргументов, считается что она вернула <code>undefined</code>:</p>
					
					<div class="flex-center">
						<img src="/images/js/16.17.png" alt="Значение функции без return">
					</div>
			
					<p>Обратите внимание, никакой ошибки нет. Просто возвращается <code>undefined</code>.</p>
					<p>Ещё пример, на этот раз с <code>return</code> без аргумента:</p>
					
					<div class="flex-center">
						<img src="/images/js/16.18.png" alt="Значение функции без return">
					</div>
				
					</div></div>
					<h2>Выбор имени функции</h2><p>Имя функции следует тем же правилам, что и имя переменной. Основное отличие – оно должно быть глаголом, т.к. функция – это действие.</p>
					<p>Как правило, используются глагольные префиксы, обозначающие общий характер действия, после которых следует уточнение.</p>
					<p>Функции, которые начинаются с <code>&quot;show&quot;</code> – что-то показывают:</p>
					
					<div class="flex-center">
						<img src="/images/js/16.19.png" alt="Значение функции без return">
					</div>
					
					<p>Функции, начинающиеся с <code>&quot;get&quot;</code> – получают, и т.п.:</p>
					
					<div class="flex-center">
						<img src="/images/js/16.20.png" alt="Значение функции без return">
					</div>
					
					<p>Это очень удобно, поскольку взглянув на функцию – мы уже примерно представляем, что она делает, даже если функцию написал совсем другой человек, а в отдельных случаях – и какого вида значение она возвращает.</p>
					<div class="important important_smart">
						<div class="important__header"><span class="important__type">Одна функция – одно действие</span></div>
						<div class="important__content"><p>Функция должна делать только то, что явно подразумевается её названием. И это должно быть одно действие.</p>
					<p>Если оно сложное и подразумевает поддействия – может быть имеет смысл выделить их в отдельные функции? Зачастую это имеет смысл, чтобы лучше структурировать код.</p>
					<p><strong>…Но самое главное – в функции не должно быть ничего, кроме самого действия и поддействий, неразрывно связанных с ним.</strong></p>
					<p>Например, функция проверки данных (скажем, <code>&quot;validate&quot;</code>) не должна показывать сообщение об ошибке. Её действие – проверить.</p>
					</div></div>
					<div class="important important_smart">
						<div class="important__header"><span class="important__type">Сверхкороткие имена функций</span></div>
						<div class="important__content"><p>Имена функций, которые используются <em>очень часто</em>, иногда делают сверхкороткими.</p>
					<p>Например, во фреймворке <a href="http://jquery.com">jQuery</a> есть функция <code>$</code>, во фреймворке <a href="http://prototypejs.org/">Prototype</a> – функция <code>$$</code>, а в библиотеке <a href="http://lodash.com/">LoDash</a> очень активно используется функция с названием из одного символа подчеркивания <code>_</code>.</p>
					</div></div>
					<h2>Итого</h2><p>Объявление функции имеет вид:</p>
					
					<div class="flex-center">
						<img src="/images/js/16.21.png" alt="Итого">
					</div>
					
					<ul>
					<li>Передаваемые значения копируются в параметры функции и становятся локальными переменными.</li>
					<li>Параметры функции копируются в её локальные переменные.</li>
					<li>Можно объявить новые локальные переменные при помощи <code>var</code>.</li>
					<li>Значение возвращается оператором <code>return ...</code>.</li>
					<li>Вызов <code>return</code> тут же прекращает функцию.</li>
					<li>Если <code>return;</code> вызван без значения, или функция завершилась без <code>return</code>, то её результат равен <code>undefined</code>.</li>
					</ul>
					<p>При обращении к необъявленной переменной функция будет искать внешнюю переменную с таким именем, но лучше, если функция использует только локальные переменные:</p>
					<ul>
					<li>Это делает очевидным общий поток выполнения – что передаётся в функцию и какой получаем результат.</li>
					<li>Это предотвращает возможные конфликты доступа, когда две функции, возможно написанные в разное время или разными людьми, неожиданно друг для друга меняют одну и ту же внешнюю переменную.</li>
					</ul>
					<p>Именование функций:</p>
					<ul>
					<li>Имя функции должно понятно и чётко отражать, что она делает. Увидев её вызов в коде, вы должны тут же понимать, что она делает.</li>
					<li>Функция – это действие, поэтому для имён функций, как правило, используются глаголы.</li>
					</ul>
					<p>Функции являются основными строительными блоками скриптов. Мы будем неоднократно возвращаться к ним и изучать все более и более глубоко.</p>
				</div>
			</div>
		</div>
	</div>
</section>