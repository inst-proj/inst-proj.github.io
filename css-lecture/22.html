---
title: Написание эффективного кода
layout: base
permalink: /css-dir/writing-code/
---
{% include header.html %}

<section class="section-syntax">
	<div class="container">
		<div class="row justify-content-center">
			<div class="col-10">
				<h1 class="section-syntax__head">
					{{ page.title }}
				</h1>
				<div class="section-syntax__content">
					<p>В процессе написания CSS следует придерживаться некоторых  принципов, которые позволяют сократить код CSS, сделать его более удобным, наглядным  и читабельным. Читабельность в данном случае означает, что разработчик спустя  какое-то время может легко понять и модифицировать стиль или что в коде  разберётся даже сторонний человек.</p><!--break-->
					<h3>Размещайте каскадные таблицы стилей в отдельном файле</h3>
					<p>Размещение стилей в отдельном файле позволяет ускорить  загрузку веб-страниц за счёт уменьшения их кода, а также кэширования файла с  описанием стиля. </p>
					<h3>Удаляйте неиспользуемые селекторы</h3>
					<p>Большое количество селекторов создаёт путаницу в вопросе о  том, кто из них за что отвечает, да и просто увеличивает объем документа. Чтобы  этого не произошло, удаляйте селекторы, которые никак не применяются на сайте.  К сожалению, определить точно, какой селектор используется, а какой нет,  довольно сложно, поэтому добавляйте комментарий в код. Это поможет хотя бы не  запутаться в большом объёме текста.</p>
					<h3>Применяйте группирование</h3>
					<p>Достоинство и удобство группирования состоит в описании  одинаковых свойств в одном месте. Тем самым, значение свойства пишется только  один раз, а не повторяется многократно.</p>
					<h3>Используйте универсальные свойства</h3>
					<p>Вместо того чтобы указывать значения отступа на каждой  стороне элемента через свойства <span class="attribute">margin-left</span>, <span class="attribute">margin-right</span>, <span class="attribute">margin-top</span> и  <span class="attribute">margin-bottom</span>, это можно одновременно задать через универсальное свойство <span class="attribute">margin</span>.  Перечисление значений через пробел позволяет установить индивидуальные отступы  для каждой стороны. Кроме <span class="attribute">margin</span> к универсальным свойствам относятся  <span class="attribute">background</span>, <span class="attribute">border</span>, <span class="attribute">font</span>, <span class="attribute">padding</span>. Применение этих свойств сокращает объём кода  и повышает его читабельность.</p>
					<h2>Форматирование кода</h2>
					<p>Существует множество разных подходов как же писать CSS-код.  Кто-то упорядочивает селекторы по блокам, другой согласно структуре документа,  третий по алфавиту, в общем, сколько людей, столько и мнений. Вы можете воспользоваться онлайновым инструментом, который форматирует CSS-код сразу четырьмя разными  способами. А там уже сами решите, какой из способов вам симпатичнее.</p>
					<!--break-->
					<p><strong>Ссылка на сайт</strong><br />
					<a href="http://www.cssportal.com/format-css/">http://www.cssportal.com/format-css/</a></p>
					<p>Принцип работы очень простой, вводите в текстовое поле свой  код, нажимаете на кнопку «Format Code»  и получаете четыре разных вида первоначального кода. Для примера возьмём  следующий небольшой фрагмент.</p>
					
					<div class="flex-center">
						<img src="/images/css/22.1.png" alt="format css">
					</div>
					
					<p>В результате его форматирования получатся такие варианты.</p>
					
					<div class="flex-center">
						<img src="/images/css/22.2.png" alt="format css">
						<p class="exampleTitle2">Форматированный CSS (Formatted CSS)</p>
					</div>
					
					<p>Порядок свойств не меняется, строки со свойствами сдвигаются  вправо на четыре пробела, селекторы разделяются между собой пустой строкой.</p>

					<div class="flex-center">
						<img src="/images/css/22.3.png" alt="format css">
						<p class="exampleTitle2">Свойства в алфавитном порядке (Properties  in Alphabetical Order)</p>
					</div>

					<p>Строки со свойствами сдвигаются вправо на четыре пробела,  селекторы разделяются между собой пустой строкой, стилевые свойства  упорядочиваются по алфавиту.</p>
					
					<div class="flex-center">
						<img src="/images/css/22.4.png" alt="format css">
						<p class="exampleTitle2">Лесенкой (Longest  Property to Shortest)</p>
					</div>

					<p>Строки со свойствами сдвигаются вправо на четыре пробела,  селекторы разделяются между собой пустой строкой, строки со свойствами  упорядочиваются по длине. Вначале идут самые длинные строки, в конце самые короткие.</p>

					<div class="flex-center">
						<img src="/images/css/22.5.png" alt="format css">
						<p class="exampleTitle2">Компактно (Compact)</p>
					</div>

					<p>Селекторы и свойства записываются в одну строку, пустые  строки удаляются.</p>
					<p>Приведённый инструмент, конечно, не претендует на полноту, в нём нельзя задать величину отступа между селекторами, количество пробелов перед свойством. Также не сокращаются лишние пробелы перед значениями свойств.  Тем не менее, главное, что процесс форматирования кода прост и удобен.</p>
					
					<h2>Минимизация кода</h2>
					<p>При редактировании CSS-файла возникает противоречивая  задача. С одной стороны код должен быть удобным для восприятия и  редактирования, быстрого отыскания нужного селектора, для чего активно  применяются отбивки, комментарии, пробелы и символы табуляции. С другой  стороны, объём кода должен быть компактным и не содержать в себе ничего  лишнего. Компактность позволяет несколько ускорить загрузку сайта и повысить  его производительность.</p>
					<p>Данное противоречие решается наличием двух версий CSS-файла:  один файл для редактирования, а второй для загрузки на сервер. Сам же процесс  сокращения кода называется минимизацией и вполне автоматизирован с помощью сетевых сервисов, которые и рассмотрим далее.</p>
					<h3>CSSMin</h3>
					<p><a href="http://tools.w3clubs.com/cssmin/">http://tools.w3clubs.com/cssmin/ </a></p>
					<p>Простой, даже можно сказать, примитивный сервис, построенный  на JavaScript и библиотеке YUI Compressor. Вводите в поле «Source» код CSS, нажимаете кнопку «Crunch» и  получаете готовый результат в соседнем поле. Также даётся оценка входного и  выходного объёма и соотношение в процентах между ними (рис.&nbsp;22.1).</p>
					
					<div class="flex-center">
						<p class="fig"><img src="/images/css/22.6.png" alt="Итог минимизации кода" /></p>
						<p class="figsign">Рис. 22.1. Итог минимизации кода</p>
					</div>
					
					<h3>CSS compressor</h3>
					<p><a href="http://www.csscompressor.com">http://www.csscompressor.com</a></p>
					<p>Этот сервис удобен тем, что комментирует все свои действия,  так что вы будете в курсе изменений вашего стиля. Работает он следующим  образом. В поле CSS Input вставляете код CSS, выбираете желаемые настройки и нажимаете  кнопку «Compress» (рис.&nbsp;22.2).</p>
					
					<div class="flex-center">
						<p class="fig"><img src="/images/css/22.7.png" alt="Интерфейс" /></p>
						<p class="figsign">Рис. 22.2. Интерфейс</p>
					</div>
					
					<p>Настройки следующие.</p>
					<ul>
						<li>Compression Mode&nbsp;—  режим сжатия. Различается четырьмя видами.
						<ul>
							<li>Highest  — все правила записываются в одну строку.</li>
							<li>High&nbsp;—  каждое правило записывается на своей строке.</li>
							<li>Standard&nbsp;—  каждое свойство пишется на отдельной строке, </li>
							<li>Low&nbsp;—  каждое свойство пишется на отдельной строке и отбивается табуляцией. </li>
						</ul>
						</li>
						<li>Sort Properties     — сортировка стилевых свойств в алфавитном  порядке.</li>
						<li>Compress colors     — цвета вида #ffffff заменяются сокращённой  формой #fff.</li>
						<li>Compress font-weight     — оптимизируется насыщенность шрифта. Такое  значение <span class="attribute">font-weight</span> как  <span class="value">normal</span> заменяется на 400, а <span class="value">bold</span> на 700.</li>
						<li>Lowercase selectors     — все селекторы записываются в нижнем  регистре.</li>
						<li>Remove  unnecessary backslashes     — ненужные слэши (\)  удаляются.</li>
						<li>Remove unnecessary semi-colons     — удалить необязательную точку с запятой  в последнем свойстве.</li>
					</ul>
					<p>После сжатия выводятся два поля: список сделанных изменений  в свойствах и сжатый CSS (рис.&nbsp;22.3).</p>
					
					<div class="flex-center">
						<p class="fig"><img src="/images/css/22.8.png" alt="Результат использования" /></p>
						<p class="figsign">Рис. 22.3. Результат использования</p>
					</div>
					
					<h3>CSS Code  Formatter and Optimizer</h3>
					<p><a href="http://www.generateit.net/css-optimize/">http://www.generateit.net/css-optimize</a></p>
					<p>Сервис построен на том же движке, что и предыдущий, поэтому  имеет ряд схожих настроек. Из приятных плюсов можно отметить подсветку синтаксиса  кода, сохранение в файл, а также ввод сетевого адреса CSS-файла.</p>
					<p>На рис. 22.4 показано окно настроек.</p>
					
					<div class="flex-center">
						<p class="fig"><img src="/images/css/22.9.png" alt="Настройки" /></p>
						<p class="figsign">Рис. 22.4. Настройки</p>
					</div>
					
					<ul>
						<li>Preserve CSS  — сохраняет все комментарии, хаки и др. При включении этой настройки некоторые  опции становятся недоступными.</li>
						<li>Sort Selectors (caution)     — сортировать селекторы по алфавиту.</li>
						<li>Sort Properties     — сортировать свойства по алфавиту.</li>
						<li>Regroup selectors — позволяет перегруппировать  селекторы, например, разделить или объединить их.</li>
						<li>Optimize shorthands — оптимизирует универсальные  свойства вроде <span class="attribute">margin</span>.</li>
						<li>Compress colors     — цвета вида #ffffff заменяются сокращённой  формой #fff.</li>
						<li>Compress font-weight     — оптимизируется насыщенность шрифта. Такое  значение <span class="attribute">font-weight</span> как  <span class="value">normal</span> заменяется на 400, а <span class="value">bold</span> на 700.</li>
						<li>Lowercase selectors     — все селекторы записываются в нижнем  регистре.</li>
						<li>Case for properties — стилевые свойства пишутся  в нижнем или верхнем регистре.</li>
						<li>Remove  unnecessary backslashes     — удалить ненужные слэши (\).</li>
						<li>Remove last ;     — удалить необязательную точку с запятой  в последнем свойстве.</li>
						<li>Discard invalid properties — удалить свойства,  которых нет в указанной спецификации. </li>
						<li>Add timestamp     — включить в код текущую дату и время.</li>
						<li>Output as file — сохранить результат в виде файла.</li>
					</ul>
					<h2>Библиотека minify</h2>
					<p>Если приходится часто вносить изменения в CSS-файл, то  процесс минимизации становится неудобным. Сами посудите, вначале надо  отредактировать файл, затем его минимизировать и полученный код сохранить в  файл, который нужно залить на сервер. Слишком много действий приходится совершать  ради одного изменения. Логичнее было бы возложить задачу минимизации на сайт.  Загрузили файл на сервер, и вот он уже в компактном виде отдаётся посетителям. Одно  из таких универсальных решений называется minify, это библиотека на PHP5. Она минимизирует, объединяет и кэширует CSS-файлы, а также JavaScript. </p>
					<!--break-->
					<p><strong>Ссылка на проект minify</strong><br />
						<a href="http://code.google.com/p/minify/">http://code.google.com/p/minify/</a></p>
					<p>Библиотека minify существует как отдельно, так и в виде  плагина для WordPress. </p>
					<p>Процесс использования библиотеки следующий. Скачиваете  архив, внутри него лежит каталог min, который необходимо переписать на сервер.  Сжатие CSS-файла  происходит довольно просто, вместо обычного пути к стилевому файлу теперь  указываем:</p>
					<p class="example">http://example.ru/min/?f=themes/default/style.css</p>
					<p>В параметре <span class="var">f</span> указывается путь к CSS-файлу относительно  корня сайта. Два и более файла пишутся через запятую:</p>
					<p class="example">http://example.ru/min/?f=themes/default/style.css,themes/default/cms.css</p>
					<p>Также процесс получения адреса можно автоматизировать,  перейдя по адресу http://example.ru/min,  откроется страница, где предлагается указать путь к файлам, которые вы желаете  минимизировать (рис.&nbsp;22.5).</p>
					
					<div class="flex-center">
						<p class="fig"><img src="/images/css/22.10.png" alt="Страница для управления файлами" /></p>
						<p class="figsign">Рис. 22.5. Страница для управления файлами</p>
					</div>
					
					<p>Кнопки со стрелками вверх и вниз нужны для изменения порядка  файлов, а кнопка «x»  для удаления файла из списка. Проверка правильности пути осуществляется  автоматически, в случае ошибки появится кнопка с надписью «404!», как показано  на рисунке выше. Для добавления еще одного файла в список служит кнопка «Add file». После того, как все  файлы указаны, пути к ним заданы корректно, что подтверждается наличием галочки  напротив каждого файла, можно нажать кнопку «Update». Ниже на странице появится  ссылка на новый комбинированный файл (текст с надписью URI) и тег <span class="tag">&lt;link&gt;</span> (текст с надписью HTML), который требуется вставить себе на страницу взамен  старого (рис.&nbsp;22.6).</p>
					
					<div class="flex-center">
						<p class="fig"><img src="/images/css/22.11.png" alt="Результат минимизации" /></p>
						<p class="figsign">Рис. 22.6. Результат минимизации</p>
					</div>
					
					<p>Согласно тестам над WordPress использование библиотеки позволяет сократить количество HTTP-запросов и уменьшить объем CSS и JavaScript-файлов до 70%.</p>
					<p>Кроме приведенных методов минимизации CSS-файлов имеются  также решения, позволяющие архивировать файлы утилитой gzip прямо на сервере и отдавать  браузеру упакованную версию. Современные браузеры прекрасно понимают gzip и распаковывают его на  месте. Весь процесс происходит автоматически и приводит к существенному  сокращению объема передаваемых по сети файлов. Вопросы настройки gzip выходят  за рамки самоучителя, поэтому я не буду на них останавливаться. Всем  заинтересованным рекомендую статьи по этим ссылкам.</p>
				</div>
			</div>
		</div>
	</div>
</section>